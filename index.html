<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cynovva Subscription Checkout</title>
    <script src="https://cdn.paddle.com/paddle/paddle.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            Paddle.Setup({ vendor: 28796 }); // ✅ Vendor ID must be an integer
            console.log("Paddle Initialized Successfully");
        });

        function openCheckout(priceId) {
            if (!priceId) {
                alert("Error: Price ID is missing!");
                return;
            }

            console.log("Opening checkout for Price ID:", priceId);

            // Debug Paddle API Call
            fetch(`https://sandbox-checkout-service.paddle.com/create/v2/checkout/prices/${priceId}/checkout-url`, {
                method: "POST",
                headers: { "Authorization": "Bearer YOUR_PADDLE_SANDBOX_API_KEY" }
            })
            .then(response => response.json())
            .then(data => {
                console.log("Paddle API Response:", data);
                if (data.url) {
                    window.location.href = data.url; // Open checkout URL
                } else {
                    alert("Paddle checkout failed: " + JSON.stringify(data));
                }
            })
            .catch(error => console.error("Paddle API Error:", error));

            // Paddle JS Checkout
            Paddle.Checkout.open({ price: priceId }); // ✅ Use Price ID
        }

        document.addEventListener("DOMContentLoaded", function () {
            document.getElementById("basic-monthly").addEventListener("click", function() {
                openCheckout("pri_01jpmhhq1prrrtchrt1wrk88n5");  // Replace with actual Price ID
            });

            document.getElementById("basic-annual").addEventListener("click", function() {
                openCheckout("pri_xxxxxxxxxxxxxxxx");  // Replace with actual Price ID
            });

            document.getElementById("pro-monthly").addEventListener("click", function() {
                openCheckout("pri_xxxxxxxxxxxxxxxx");  // Replace with actual Price ID
            });

            document.getElementById("pro-annual").addEventListener("click", function() {
                openCheckout("pri_xxxxxxxxxxxxxxxx");  // Replace with actual Price ID
            });
        });
    </script>
</head>
<body>
    <h2>Subscribe to Cynovva</h2>
    <p>Select a plan to subscribe:</p>

    <button id="basic-monthly">Subscribe to Basic - Monthly</button>
    <button id="basic-annual">Subscribe to Basic - Annual</button>
    <button id="pro-monthly">Subscribe to Pro - Monthly</button>
    <button id="pro-annual">Subscribe to Pro - Annual</button>

    <p><small>Note: This is a test page using Paddle's Sandbox mode.</small></p>
</body>
</html>

